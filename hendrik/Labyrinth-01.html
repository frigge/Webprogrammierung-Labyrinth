<!DOCTYPE html>
<html>

	<head>
		<title>JavaScript</title>
		<meta charset="utf-8"/>
		<style>canvas { width: 100%; height: 100% }</style> <!-- Canvas mit voller Fenstergröße -->
	</head>
	
	<body> 
		<script src="three.min.js"></script>
        <script src="variablen.js"></script>
        <script src="key_input.js"></script>        
		
		<script>
			var scene = new THREE.Scene(); // Szene erstellen
			
			// neue Kamera erstellen
			// Öffnungswinkel 50°
			// Seitenverhältnis: window.innerWidth/window.innerHeight = gesamtes Browserfenster
			// vordere Clippingebene: 0.1
			// hintere Clippingebene: 1000
			var camera = new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,0.1,1000);

			// setzen der Kameraposition			
			function cameraPosition(x,y,z) {
				camera.position.x = x;
				camera.position.y = y;
				camera.position.z = z;
				scene.add(camera);
			}
			
			// Licht
			var lamp = new THREE.PointLight(0xffffff);
			lamp.position.set(0, 0, -10); // Position der Lampe
			scene.add(lamp); // Licht zu scene hinzufügen
			
			// Renderer erstellen
			var renderer = new THREE.WebGLRenderer();
			renderer.setSize(window.innerWidth,window.innerHeight); // gesamtes Browserfenster
			document.body.appendChild(renderer.domElement); // Canvas plazieren

			function makeFloor(col, x, y) {
				var ground = new THREE.Mesh(
				new THREE.PlaneGeometry(x, y),
				new THREE.MeshBasicMaterial({color: col})
				);
			// ground in die Horizontale drehen				
			ground.rotation.x = -Math.PI / 2; 
			scene.add(ground);			
			}
				
			function makeWall(posX, posY, posZ, col) {
				var wall = new THREE.Mesh(
					new THREE.BoxGeometry(1, 1, 1),
					new THREE.MeshBasicMaterial({color: col}));
				wall.position.x = posX;
				wall.position.y = posY;
				wall.position.Z = posZ;				
				scene.add(wall);
			}
						
			// Hauptfunktion - Änderungen der Scene
			function render() {
				cameraX += 0.01;
				cameraPosition(cameraX, cameraY, cameraZ);
				renderer.render(scene, camera);
			}

			makeFloor(0xFFD39B, 1000, 1000);
			
			makeWall(1, 1, 1, 0xFF0000);
			makeWall(3, 1, 1, 0x00FF00);
			makeWall(5, 1, 1, 0x0000FF);
			makeWall(8, 1, 10, 0xFFFFFF);
												
			cameraPosition(cameraX, cameraY, cameraZ);

			function loop() { // Endlosschleife der Funktion render()
				render();
				requestAnimationFrame(loop); // requestAnimationFrame : Browser regelt die Framerate
			};
			
			loop();
			//renderer.render(scene, camera); // Scene zeichnen
		
		</script>
	</body>
	
</html>