<!DOCTYPE html>
<html>
<head>

    <title>Labyrinth</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1">

    <link rel="stylesheet" type="text/css" href="view/css/style.css">  

    <script src="libraries/three.r68.js"></script>
    <script src="libraries/FpsControls.js"></script>
    <script src="libraries/stats.min.js"></script>
    
    <script src="helper/math.js"></script>
    
    <script src="controller/lab_GameController.js"></script>
    
    <script src="view/lab_AbstractRenderer.js"></script>
    <script src="view/lab_LabyrinthRenderer.js"></script>
    <script src="view/lab_MinimapRenderer.js"></script>
    <script src="view/lab_RepresentationLoader.js"></script>
    <script src="view/lab_LevelHandler.js"></script>
    
    <script src="model/lab_GameModel.js"></script>
    <script src="model/lab_EntityModel.js"></script>
    <script src="model/lab_PlayerModel.js"></script>

</head>
<body>
                
    <div id="wrapper">
        <div id="instructions" style="">
            <span style="font-size:40px">Zum Spielen klicken!</span>
            <br /><br />
            (W, A, S, D = Gehen, SPACE = Springen, SHIFT = Rennen, MAUS = Umschauen)
        </div>
    </div>

    <script>
        
        var isWebGL         = true;
        var gameController  = null;
        var stats           = null;
        
        // detect if webgl is available
        try { 
            var canvas  = document.createElement( 'canvas' );
            isWebGL = !! window.WebGLRenderingContext && ( canvas.getContext( 'webgl' ) || canvas.getContext( 'experimental-webgl' ) ); 
        } catch( e ) { 
            isWebGL = false; 
        }
        
        if(isWebGL){
            gameController = new lab_GameController('wrapper');
            gameController.initGame();
            
            stats = new Stats();
            document.getElementById("wrapper").appendChild( stats.domElement );
            
            run();
        } else {
            alert('Leider wird WEBGL nicht unterst√ºtzt!');
        }
        
        
        function run(){
            
            requestAnimationFrame(run);
            
            stats.update();
            gameController.update();
            
            render();
            
        }
        
        
        function render(){
            gameController.labyrinthRenderer.render(gameController.scene, gameController.camera);
        }
        
    </script>
    
</body>
</html>
